#[COMPLETED]

import math

class Solution(object):
    # Credit: https://stackoverflow.com/questions/4941753/is-there-a-math-ncr-function-in-python
    def nCr(self, n, r):
        f = math.factorial
        return f(n) // f(r) // f(n - r)

    def numPairsDivisibleBy60(self, time):

        time = [n % 60 for n in time]
        groups = {}
        for n in time:
            groups[n] = 1 if n not in groups else groups[n] + 1

        num_pairs = 0
        for n in groups:
            if groups[n] == None:
                continue
            if n == 0 or n == 30:
                if groups[n] > 1:
                    num_pairs += self.nCr(groups[n], 2)
                    groups[n] = None
            elif 60 - n in groups:
                num_pairs += groups[n] * groups[60 - n]
                groups[n] = None
                groups[60 - n] = None
        return num_pairs


sol = Solution()
print(sol.numPairsDivisibleBy60([30,20,150,100,40]), "expected 3")
print(sol.numPairsDivisibleBy60([60,60,60]), "expected 3")
print(sol.numPairsDivisibleBy60([439,407,197,191,291,486,30,307,11]), "expected ?")
print(sol.numPairsDivisibleBy60([418,204,77,278,239,457,284,263,372,279,476,416,360,18]), "expected ?")
print(sol.numPairsDivisibleBy60([20,40]), "expected 1")
print(sol.numPairsDivisibleBy60([439,407,197,191,291,486,30,307,11]), "expected 0")
print(sol.numPairsDivisibleBy60([338,4,370,217,215,367,443,153,145,202,71,49,181,116,411,467,250,135,64,428,206,31,66,407,193,359,70,111,264,59,361,498,303,43,491,161,36,86,373,284,350,260,455,240,98,5,347,256,397,156,140,164,356,273,88,278,203,123,126,120,123,279,140,116,104,330,434,137,131,175,74,137,493,475,330,454,131,280,230,143,228,74,11,101,121,289,308,383,324,205,321,337,9,364,455,111,292,343,169,331,470,246,318,126,52,132,209,248,442,291,432,175,33,326,165,372,474,446,476,450,33,156,243,76,470,234,345,311,99,226,335,27,68,337,2,477,466,393,203,323,301,280,493,152,494,123,171,84,202,64,499,17,92,16,457,333,131,189,353,433,10,309,9,495,234,434,381,145,443,312,168,364,495,354,294,267,174,89,60,393,493,371,158,238,11,429,165,26,227,350,478,328,416,386,357,469,230,440,403,143,480,180,324,438,21,217,45,134,458,132,360,263,207,271,139,424,254,352,285,369,6,316,69,449,297,240,377,48,378,415,232,13,168,409,76,49,326,458,1,3,312,405,128,231,205,297,352,407,219,20,281,165,240,271,160,46,369,335,380,144,410,443,196,429,339,288,127,302,114,171,279,437,102,123,182,484,29,368,336,128,200,37,51,146,130,179,286,317,412,48,298,61,116,213,152,262,473,304,13,280,129,386,252,33,155,406,360,78,437,181,440,365,480,48,341,8,215,313,371,29,419,210,476,196,74,112,447,161,183,433,223,323,311,407,45,122,268,354,282,293,205,406,154,264,71,299,98,288,407,52,419,214,13,213,497,60,223,476,61,108,52,431,287,211,105,424,105,216,199,488,294,174,411,33,364,317,385,372,466,101,322,24,235,157,494,421,381,461,171,1,111,149,80,399,83,153,322,131,381,103,314,387,58,131,385,361,21,318,123,466,350,283,125,277,354,253,103,426,244,424,482,4,168,415,479,416,242,319,242,271,171,99,356,219,313,246,266,414,234,117,480,298,269,306,403,252,224,170,71,309,291,259,461,164,356,131,350,158,65,391,230,240,197,309,266,320,323,455,250,85,305,449,204,455,415,167,44,484,282,76,482,69,285,316,111,261,67,171,239,225,274,81,140,358,470,488,10,339,184,320,58,49,368,386,184,97,204,109,36,281,410,368,52,86,26,423,88,67,105,117,388,154,131,259,34,182,62,448,414,83,117,235,229,278,290,21,174,16,368,420,108,151,426,224,445,145,354,278,296,499,127,440,281,271,191,451,320,323,118,485,385,316,221,323,75,132,24,360,476,420,324,68,94,315,293,211,126,429,354,7,460,220,264,493,500,450,155,72,300,333,433,272,292,367,48,81,272,48,272,25,249,10,91,138,233,183,272,66,178,94,241,253,343,2,80,222,107,343,49,74,92,473,151,468,173,366,175,59,172,352,440,32,282,485,153,453,126,238,121,342,321,308,327,484,321,146,472,157,237,84,163,486,491,214,224,181,454,403,428,119,136,230,467,267,497,137,231,357,138,461,318,452,124,167,200,180,494,206,86,369,255,427,56,267,177,376,461,500,2,93,25,500,287,466,458,156,348,191,104,46,82,450,51,107,98,60,197,342,471,328,116,363,359,151,333,153,398,207,40,3,70,113,418,167,78,134,15,194,163,245,424,437,105,283,302,452,239,298,12,129,475,275,234,237,207,257,256,284,135,419,187,380,248,245,341,202,331,156,480,429,432,233,219,61,184,343,177,333,423,446,303,445,406,392,290,405,110,227,231,100,151,261,46,414,330,271,340,55,136,107,472,110,477,426,222,26,333,75,427,180,270,442,378,447,401,462,214,62,44,371,9,378,98,204,243,222,287,150,394,85,32,391,359,159,173,353,3,217,42,52,36,64,465,304,31,182,450,432,485,269,306,56,167,357,405,104,320,203,352,63,327,196,191,453,14,46,304,33,320,180,186,63,308,369,323,127,404,466,267,45,115,156,35,178,464,449,323,294,444,236,307,52,227,97,486,388,392,307,6,262,469,297,246,39,488,440,68,39,220,115,187,206,373,477,151,414,423,251,212,132,75,456,286,319,343,183,488,376,433,136,192,312,28,95,488,133,99,308,345,353,68,321,423,117,217,459,430,399,367,18,192,344,126,208,360,487,150,258,161,357,209,447,121,119,39,35,206,215,305,269,365,427,238,169,409,253,305,375,253,125,273,258,207,170,120,394,270,265,60,494,193,436,381,247,281,60,457,71,223,227,234,143,40,395,344,130,327,30,425,95,466,136,331,139,402,4,137,345,486,479,386,144,460,279,328,340,249,326,114,417,356,216,47,351,498,429,157,256,328,212,383,169,296,85,236,314,132,404,461,437,234,435,210,87,495,92,458,455,163,69,279,168,119,19,439,191,95,335,145,228,409,48,225,148,492,67,232,237,237,441,85,418,253,488,426,3,229,347,67,278,153,201,394,5,214,382,158,258,208,311,369,376,20,117,162,101,247,58,311,262,138,275,175,361,384,367,314,252,471,318,284,111,490,163,77,286,72,163,329,417,336,444,440,366,463,323,326,194,118,310,62,109,137,143,345,249,9,298,236,475,227,263,224,458,131,42,20,329,105,89,438,1,183,22,118,121,78,410,82,85,292,388,284,436,368,7,191,466,250,383,42,363,203,97,143,205,235,326,441,89,34,93,439,207,454,114,199,130,127,43,320,93,346,214,453,105,223,105,263,57,58,441,207,88,6,136,457,302,346,408,94,415,490,5,435,474,184,78,440,96,500,245,118,87,470,422,277,147,144,397,383,44,34,85,3,38,8,13,55,472,96,106,26,398,101,295,63,299,221,340,320,227,140,300,251,117,394,296,349,274,249,281,194,329,76,77,294,74,218,491,368,19,193,114,317,81,219,490,29,220,197,440,11,31,75,121,428,185,429,178,316,163,237,451,472,195,438,479,421,210,87,402,92,336,262,236,380,423,61,3,223,279,241,260,189,240,281,226,4,222,359,278,266,45,320,70,434,347,267,38,7,472,91,14,167,201,474,386,334,61,34,96,9,291,327,286,51,263,299,57,363,121,145,415,415,324,386,30,347,247,188,291,144,272,58,328,142,404,137,418,399,153,246,219,229,204,113,333,176,75,128,93,341,404,334,402,120,48,404,203,259,497,363,112,433,444,460,6,128,361,403,219,475,298,137,483,281,391,415,365,92,392,92,23,298,249,134,197,32,145,125,374,430,61,374,359,292,150,378,18,201,346,453,297,110,172,444,344,492,487,187,191,199,427,303,413,295,295,497,246,63,436,321,98,57,473,117,71,71,297,75,56,381,333,90,400,253,251,222,139,194,76,375,234,470,34,454,249,371,311,224,224,209,352,337,279,311,227,302,149,166,354,183,222,61,361,426,153,287,492,335,239,407,446,194,114,339,59,40,298,410,251,450,199,215,270,128,250,164,494,147,56,51,151,223,482,40,454,2,63,32,250,171,60,24,458,180,471,320,86,85,129,473,209,471,412,284,32,190,126,336,298,98,175,232,338,222,111,158,329,496,146,185,485,319,358,12,150,402,329,389,329,61,277,363,376,359,314,100,52,175,127,479,295,366,313,392,106,180,393,111,144,466,23,445,317,30,98,251,124,482,49,244,186,29,437,52,229,303,369,67,417,123,473,106,178,448,291,311,252,413,393,232,473,448,316,260,223,296,239,213,16,94,54,383,152,188,100,436,234,413,169,282,7,443,176,468,178,254,91,205,282,142,174,120,24,56,451,58,74,125,237,111,244,390,308,189,179,314,215,307,417,23,95,128,451,250,281,262,159,470,119,223,310,433,68,239,23,444,80,456,338,38,440,412,30,96,104,227,307,16,84,202,261,301,130,5,323,168,287,82,478,419,250,76,423,336,303,361,404,59,341,152,379,1,117,156,457,122,301,367,337,48,214,196,455,401,318,465,193,250,326,150,81,2,321,316,457,391,44,167,466,361,440,164,450,265,163,64,114,179,163,239,416,248,233,105,469,381,19,297,245,390,423,105,66,309,166,236,93,16,261,416,41,86,344,404,278,455,446,450,335,11,234,206,196,223,481,346,497,356,398,408,449,214,8,423,204,54,372,154,334,45,24,320,290,347,117,26,223,161,334,92,118,43,230,176,394,186,307,46,130,362,37,358,167,258,271,221,428,496,463,476,372,89,433,107,175,343,259,80,473,77,8,341,218,393,380,434,28,87,78,309,233,96,210,200,266,268,12,326,48,244,3,258,195,36,30,186,90,14,139,121,269,117,95,2,423,243,131,179,224,192,26,267,452,309,81,336,386,82,385,166,278,320,185,186,328,399,421,204,123,80,72,45,402,157,159,453,398,101,467,399,58,492,283,128,57,189,484,464,452,39,200,261,490,326,76,422,394,429,313,69,296,286,426,425,84,255,316,276,158,265,489,302,68,388,378,45,207,220,257,219,351,303,224,252,366,41,432,85,153,106,70,385,311,363,118,76,152,457,63,271,55,301,328,405,208,370,218,117,323,179,327,410,379,350,373,281,260,346,109,287,389,254,149,285,227,387,386,230,48,482,355,460,29,236,80,335,125,340,155,160,107,397,351,215,48,145,104,350,187,167,460,168,431,42,249,64,448,159,136,331,262,239,80,417,249,134,345,332,459,498,418,111,189,486,155,112,499,75,163,7,83,146,272,441,2,20,150,446,255,385,423,395,9,298,66,109,357,324,416,256,366,422,13,292,276,430,393,224,330,244,100,246,284,454,421,325,478,346,384,107,470,91,452,71,62,261,458,240,343,476,211,300,95,78,210,317,121,86,304,292,331,381,182,165,155,8,239,188,367,352,92,176,399,185,498,470,435,59,327,410,103,56,244,55,313,341,472,202,374,116,308,234,94,389,62,443,187,306,103,87,146,220,440,400,238,85,189,456,330,61,313,24,379,428,139,381,172,483,336,49,397,338,270,288,1,224,19,480,160,206,32,328,457,248,122,111,205,261,49,326,186,269,352,153,441,198,298,190,173,448,288,208,301,200,5,41,426,154,213,57,154,35,410,345,227,419,170,249,18,184,206,287,376,357,141,205,260,456,143,431,287,137,434,346,191,396,245,262,440,259,436,81,114,110,389,450,421,305,338,323,304,458,253,203,470,384,67,316,396,237,65,66,342,333,206,91,405,388,98,341,283,332,260,280,183,273,42,213,364,203,292,447,51,387,365,282,350,311,106,243,158,373,360,37,30,416,122,8,129,167,21,488,488,280,294,266,297,471,144,324,289,40,123,328,392,264,498,25,171,168,246,445,373,57,493,60,27,294,52,347,190,306,461,326,330,351,297,252,425,240,283,42,379,212,115,459,105,96,76,66,162,21,12,134,25,223,266,161,446,32,483,446,389,319,294,496,209,130,33,12,173,68,43,163,391,311,49,346,336,127,228,363,474,481,434,63,290,253,365,342,414,17,43,105,356,124,164,77,409,271,463,417,155,304,253,143,35,414,124,235,212,138,461,492,290,500,235,338,113,323,478,34,175,85,204,186,373,156,288,16,78,280,438,20,487,247,128,239,345,7,396,33,498,183,311,43,45,287,32,201,477,363,127,218,422,296,403,287,239,279,4,304,401,301,354,2,135,33,496,42,108,236,241,353,397,480,435,266,92,393,394,447,262,131,458,440,145,499,95,139,43,398,354,106,45,20,299,420,257,70,329,436,289,121,36,393,337,304,391,68,461,402,390,245,428,14,334,174,494,129,60,110,3,144,198,212,486,399,437,93,372,295,372,114,126,432,355,227,410,140,141,69,419,490,295,358,35,20,235,3,396,254,266,421,153,277,74,261,381,45,13,82,116,307,32,58,473,431,484,154,28,15,161,230,306,130,274,77,128,162,462,399,108,331,458,158,276,425,332,365,293,126,386,465,293,318,105,106,265,141,323,7,340,8,105,309,174,405,41,385,118,194,421,371,185,226,251,87,405,217,283,124,250,118,144,348,396,36,159,298,298,406,358,359,337,154,399,420,4,283,210,175,258,498,319,130,371,101,177,52,118,299,124,319,348,30,240,386,360,22,71,480,157,19,403,19,439,374,30,495,223,268,212,329,210,334,97,412,90,199,24,247,209,94,165,209,120,281,84,255,69,175,112,314,161,143,25,338,107,478,254,84,303,421,260,106,220,204,332,53,366,285,337,182,197,483,256,58,384,467,74,104,487,331,298,323,306,70,412,185,492,305,403,269,500,377,112,258,155,414,121,66,308,241,99,132,263,79,388,38,118,205,318,100,111,162,225,347,352,208,85,198,154,435,102,73,187,4,446,81,323,495,303,10,323,1,202,157,317,131,177,290,154,342,214,219,460,353,294,46,88,481,311,199,273,40,422,48,83,350,137,188,253,259,70,261,403,396,355,105,473,166,264,125,494,33,444,237,462,239,356,493,497,174,110,107,485,445,263,335,312,488,58,174,304,427,351,27,453,199,400,269,186,277,340,183,288,237,395,75,306,244,31,327,167,74,202,499,211,153,378,285,278,409,427,183,452,245,129,173,255,449,107,32,441,162,325,204,327,103,175,155,274,292,495,244,82,154,232,285,446,268,49,490,78,293,378,487,341,56,384,266,39,41,107,126,88,291,339,61,367,129,197,471,448,220,397,337,411,4,402,487,142,23,378,450,123,380,242,39,476,493,184,442,369,226,461,352,133,411,379,477,397,458,191,267,491,411,364,144,473,130,47,184,252,460,97,229,253,139,52,242,68,461,373,49,279,205,112,309,447,86,132,356,16,174,203,361,292,241,264,491,84,35,460,61,263,481,480,212,20,372,190,332,213,209,264,432,135,172,7,357,111,349,242,374,4,322,284,187,106,318,281,422,140,479,138,68,271,57,161,90,197,166,450,58,59,372,360,293,124,342,241,460,59,67,21,340,201,272,399,256,249,451,212,143,274,335,442,335,104,213,343,455,127,154,131,266,246,346,29,406,102,367,3,234,205,60,218,25,147,426,335,216,485,499,476,488,324,138,87,289,494,236,186,352,362,145,122,126,155,120,296,155,185,495,463,344,284,352,175,497,119,71,372,220,94,342,445,96,73,136,89,19,282,442,398,124,163,40,177,313,249,397,184,434,450,119,240,277,69,52,286,64,96,128,346,235,189,196,500,339,282,201,77,303,59,467,384,95,376,370,62,40,477,65,433,41,260,150,114,409,470,227,451,183,467,356,325,477,81,454,7,45,133,473,174,291,73,195,495,205,243,384,428,178,109,468,399,83,303,492,289,113,261,425,204,305,330,243,422,170,158,427,52,203,468,77,192,22,449,195,107,207,219,140,255,314,435,426,122,185,488,249,458,172,41,270,371,230,71,289,408,111,124,411,346,388,137,492,467,189,342,90,205,467,429,156,248,51,498,476,395,377,453,138,356,374,251,55,91,30,109,98,27,394,340,446,134,252,300,10,460,22,12,436,223,483,435,323,454,410,422,421,241,5,236,454,499,51,449,370,289,342,200,343,288,38,325,493,402,300,427,300,461,319,427,357,11,367,47,318,489,341,256,213,65,372,33,293,467,179,265,193,31,261,241,351,62,332,219,407,356,202,168,449,5,99,359,374,108,145,440,79,21,231,243,85,485,154,350,235,49,263,26,104,319,235,246,386,81,1]), "expected 94449")
